<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=generator content="Wowchemy 5.0.0-beta.1 for Hugo"><meta name=author content="Theo Sanderson"><meta name=description content="Maccabi have now released a preprint on Pfizer vaccine efficacy after the first dose. Let&rsquo;s take a look at it.
Firstly a little complaint. If you go to the `Data' tab on bioRxiv, it says:"><link rel=alternate hreflang=en-us href=/post/2021-01-31-maccabi-2/><link rel=preconnect href=https://fonts.gstatic.com crossorigin><meta name=theme-color content="#1565c0"><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/academicons/1.9.0/css/academicons.min.css integrity="sha512-W4yqoT1+8NLkinBLBZko+dFB2ZbHsYLDdr50VElllRcNt2Q4/GSs6u71UHKxB7S6JEMCp5Ve4xjh3eGQl/HRvg==" crossorigin=anonymous><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css integrity="sha256-FMvZuGapsJLjouA6k7Eo2lusoAX9i0ShlWFG6qt7SLc=" crossorigin=anonymous><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin=anonymous media=print onload="this.media='all'"><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/styles/github.min.css crossorigin=anonymous title=hl-light media=print onload="this.media='all'"><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/styles/dracula.min.css crossorigin=anonymous title=hl-dark media=print onload="this.media='all'" disabled><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/leaflet.min.css integrity="sha512-1xoFisiGdy9nvho8EgXuXvnpR5GAMSjFwp40gSRE3NwdUdIMIKuPa7bqoUhLD0O/5tPNhteAsE5XyyMi5reQVA==" crossorigin=anonymous media=print onload="this.media='all'"><script src=https://cdnjs.cloudflare.com/ajax/libs/lazysizes/5.2.2/lazysizes.min.js integrity="sha512-TmDwFLhg3UA4ZG0Eb4MIyT1O1Mb+Oww5kFG0uHqXsdbyZz9DcvYQhKpGgNkamAI6h2lGGZq2X8ftOJvF/XjTUg==" crossorigin=anonymous async></script><link rel=preload as=style href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap"><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap" media=print onload="this.media='all'"><link rel=stylesheet href=/css/wowchemy.a2dda909fb8228e17412d06b4423e0a6.css><script async src="https://www.googletagmanager.com/gtag/js?id=UA-65298-19"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}
function trackOutboundLink(url,target){gtag('event','click',{'event_category':'outbound','event_label':url,'transport_type':'beacon','event_callback':function(){if(target!=='_blank'){document.location=url;}}});console.debug("Outbound link clicked: "+url);}
function onClickCallback(event){if((event.target.tagName!=='A')||(event.target.host===window.location.host)){return;}
trackOutboundLink(event.target,event.target.getAttribute('target'));}
gtag('js',new Date());gtag('config','UA-65298-19',{});document.addEventListener('click',onClickCallback,false);</script><link rel=manifest href=/index.webmanifest><link rel=icon type=image/png href=/images/icon_hu141e5746c4390abcaff97a6bd8371d9c_4466_32x32_fill_lanczos_center_2.png><link rel=apple-touch-icon type=image/png href=/images/icon_hu141e5746c4390abcaff97a6bd8371d9c_4466_192x192_fill_lanczos_center_2.png><link rel=canonical href=/post/2021-01-31-maccabi-2/><meta property="twitter:card" content="summary"><meta property="twitter:site" content="@theosanderson"><meta property="twitter:creator" content="@theosanderson"><meta property="og:site_name" content="Theo Sanderson"><meta property="og:url" content="/post/2021-01-31-maccabi-2/"><meta property="og:title" content="Analysing Maccabi data on initial efficacy of first vaccine dose - part 2 | Theo Sanderson"><meta property="og:description" content="Maccabi have now released a preprint on Pfizer vaccine efficacy after the first dose. Let&rsquo;s take a look at it.
Firstly a little complaint. If you go to the `Data' tab on bioRxiv, it says:"><meta property="og:image" content="/images/icon_hu141e5746c4390abcaff97a6bd8371d9c_4466_512x512_fill_lanczos_center_2.png"><meta property="twitter:image" content="/images/icon_hu141e5746c4390abcaff97a6bd8371d9c_4466_512x512_fill_lanczos_center_2.png"><meta property="og:locale" content="en-us"><meta property="article:published_time" content="2021-01-31T10:18:37+00:00"><meta property="article:modified_time" content="2021-01-31T10:18:37+00:00"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"/post/2021-01-31-maccabi-2/"},"headline":"Analysing Maccabi data on initial efficacy of first vaccine dose - part 2","datePublished":"2021-01-31T10:18:37Z","dateModified":"2021-01-31T10:18:37Z","author":{"@type":"Person","name":"Theo Sanderson"},"publisher":{"@type":"Organization","name":"Theo Sanderson","logo":{"@type":"ImageObject","url":"/images/icon_hu141e5746c4390abcaff97a6bd8371d9c_4466_192x192_fill_lanczos_center_2.png"}},"description":"Maccabi have now released a preprint on Pfizer vaccine efficacy after the first dose. Let\u0026rsquo;s take a look at it.\nFirstly a little complaint. If you go to the `Data' tab on bioRxiv, it says:"}</script><title>Analysing Maccabi data on initial efficacy of first vaccine dose - part 2 | Theo Sanderson</title></head><body id=top data-spy=scroll data-offset=70 data-target=#TableOfContents class=page-wrapper><script src=/js/wowchemy-init.min.7264cf0eba3b66951b36da7d2cecf9c5.js></script><aside class=search-modal id=search><div class=container><section class=search-header><div class="row no-gutters justify-content-between mb-3"><div class=col-6><h1>Search</h1></div><div class="col-6 col-search-close"><a class=js-search href=# aria-label=Close><i class="fas fa-times-circle text-muted" aria-hidden=true></i></a></div></div><div id=search-box><input name=q id=search-query placeholder=Search... autocapitalize=off autocomplete=off autocorrect=off spellcheck=false type=search class=form-control aria-label=Search...></div></section><section class=section-search-results><div id=search-hits></div></section></div></aside><div class=page-header><nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id=navbar-main><div class=container-xl><div class="d-none d-lg-inline-flex"><a class=navbar-brand href=/>Theo Sanderson</a></div><button type=button class=navbar-toggler data-toggle=collapse data-target=#navbar-content aria-controls=navbar aria-expanded=false aria-label="Toggle navigation">
<span><i class="fas fa-bars"></i></span></button><div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none"><a class=navbar-brand href=/>Theo Sanderson</a></div><div class="navbar-collapse main-menu-item collapse justify-content-start" id=navbar-content><ul class="navbar-nav d-md-inline-flex"><li class=nav-item><a class=nav-link href=/#about><span>Home</span></a></li><li class=nav-item><a class=nav-link href=/#featured><span>Publications</span></a></li><li class=nav-item><a class=nav-link href=/#posts><span>Posts</span></a></li><li class=nav-item><a class=nav-link href=/#contact><span>Contact</span></a></li></ul></div><ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2"><li class=nav-item><a class="nav-link js-search" href=# aria-label=Search><i class="fas fa-search" aria-hidden=true></i></a></li><li class="nav-item dropdown theme-dropdown"><a href=# class=nav-link data-toggle=dropdown aria-haspopup=true aria-label="Display preferences"><i class="fas fa-moon" aria-hidden=true></i></a><div class=dropdown-menu><a href=# class="dropdown-item js-set-theme-light"><span>Light</span></a>
<a href=# class="dropdown-item js-set-theme-dark"><span>Dark</span></a>
<a href=# class="dropdown-item js-set-theme-auto"><span>Automatic</span></a></div></li></ul></div></nav></div><div class=page-body><article class=article><div class="article-container pt-3"><h1>Analysing Maccabi data on initial efficacy of first vaccine dose - part 2</h1><div class=article-metadata><span class=article-date>Jan 31, 2021</span></div></div><div class=article-container><div class=article-style><p>Maccabi have now released a <a href=https://www.medrxiv.org/content/10.1101/2021.01.27.21250612v1 target=_blank rel=noopener>preprint</a> on Pfizer vaccine efficacy after the first dose. Let&rsquo;s take a look at it.</p><p>Firstly a little complaint. If you go to the `Data' tab on bioRxiv, it says:</p><p><img src=data_availability.png alt></p><p>Now of course one understands that there may be lots of underlying patient data that can&rsquo;t be released for regulatory reasons. But some data definitely can, because they release it in this preprint, in graphical form.</p><p><img src=maccabi.png alt></p><p>At bare minimum, we should demand that the data directly plotted in graphs are released in numerical form to permit further analysis. There can be no regulatory justification for not doing so.</p><p>Fortunately, the data are there, we just need to extract them. For this image file I did that by hand with <a href=https://apps.automeris.io/wpd/ target=_blank rel=noopener>WebPlotDigitizer</a>.</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span class=nv>maccabi</span> <span class=o>=</span> <span class=nf>read_csv</span><span class=o>(</span><span class=s>"maccabi.csv"</span>,col_names <span class=o>=</span> <span class=nf><a href=https://rdrr.io/r/base/c.html>c</a></span><span class=o>(</span><span class=s>'Day'</span>,<span class=s>'CumulativeIncidence'</span><span class=o>)</span><span class=o>)</span> <span class=o>%&gt;%</span> <span class=nf>mutate</span><span class=o>(</span>Day<span class=o>=</span><span class=nf><a href=https://rdrr.io/r/base/Round.html>round</a></span><span class=o>(</span><span class=nv>Day</span><span class=o>)</span><span class=o>)</span> 

<span class=nf>ggplot</span><span class=o>(</span><span class=nv>maccabi</span>,<span class=nf>aes</span><span class=o>(</span>x<span class=o>=</span><span class=nv>Day</span>,y<span class=o>=</span><span class=nv>CumulativeIncidence</span><span class=o>)</span><span class=o>)</span><span class=o>+</span><span class=nf>geom_line</span><span class=o>(</span>color<span class=o>=</span><span class=s>"blue"</span><span class=o>)</span><span class=o>+</span><span class=nf>theme_bw</span><span class=o>(</span><span class=o>)</span><span class=o>+</span><span class=nf>labs</span><span class=o>(</span>x<span class=o>=</span><span class=s>"Day"</span>,y<span class=o>=</span><span class=s>"Cumulative Incidence"</span><span class=o>)</span><span class=o>+</span><span class=nf>scale_y_continuous</span><span class=o>(</span>labels<span class=o>=</span><span class=nf>scales</span><span class=nf>::</span><span class=nv><a href=https://scales.r-lib.org//reference/label_percent.html>percent</a></span>,limits<span class=o>=</span><span class=nf><a href=https://rdrr.io/r/base/c.html>c</a></span><span class=o>(</span><span class=m>0</span>,<span class=kc>NA</span><span class=o>)</span><span class=o>)</span>

</code></pre><p><img src=figs/unnamed-chunk-2-1.png width=700px style=display:block;margin:auto></p></div><p>Looks like we&rsquo;ve pretty much got it. Now let&rsquo;s convert that cumulative incidence into a daily incidence (something not done in the Maccabi preprint).</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span class=nv>perday</span> <span class=o>=</span> <span class=nv>maccabi</span> <span class=o>%&gt;%</span> <span class=nf>arrange</span><span class=o>(</span><span class=nv>Day</span>,<span class=nv>CumulativeIncidence</span><span class=o>)</span> <span class=o>%&gt;%</span> <span class=nf>group_by</span><span class=o>(</span><span class=nv>Day</span><span class=o>)</span> <span class=o>%&gt;%</span> <span class=nf>summarise</span><span class=o>(</span>CumulativeIncidence<span class=o>=</span><span class=nf><a href=https://rdrr.io/r/base/Extremes.html>max</a></span><span class=o>(</span><span class=nv>CumulativeIncidence</span><span class=o>)</span><span class=o>)</span> <span class=o>%&gt;%</span> <span class=nf>mutate</span><span class=o>(</span>DailyIncidence<span class=o>=</span><span class=nv>CumulativeIncidence</span><span class=o>-</span><span class=nf><a href=https://rdrr.io/r/stats/lag.html>lag</a></span><span class=o>(</span><span class=nv>CumulativeIncidence</span><span class=o>)</span>,type<span class=o>=</span><span class=s>"Vaccinated"</span><span class=o>)</span> 

<span class=nf>ggplot</span><span class=o>(</span><span class=nv>perday</span>,<span class=nf>aes</span><span class=o>(</span>x<span class=o>=</span><span class=nv>Day</span>,y<span class=o>=</span><span class=nv>DailyIncidence</span><span class=o>)</span><span class=o>)</span><span class=o>+</span><span class=nf>geom_line</span><span class=o>(</span>color<span class=o>=</span><span class=s>"blue"</span><span class=o>)</span><span class=o>+</span><span class=nf>theme_bw</span><span class=o>(</span><span class=o>)</span><span class=o>+</span><span class=nf>labs</span><span class=o>(</span>x<span class=o>=</span><span class=s>"Day"</span>,y<span class=o>=</span><span class=s>"Daily Incidence"</span><span class=o>)</span><span class=o>+</span><span class=nf>scale_y_continuous</span><span class=o>(</span>labels<span class=o>=</span><span class=nf>scales</span><span class=nf>::</span><span class=nv><a href=https://scales.r-lib.org//reference/label_percent.html>percent</a></span>,limits<span class=o>=</span><span class=nf><a href=https://rdrr.io/r/base/c.html>c</a></span><span class=o>(</span><span class=m>0</span>,<span class=kc>NA</span><span class=o>)</span><span class=o>)</span> 

</code></pre><p><img src=figs/unnamed-chunk-3-1.png width=700px style=display:block;margin:auto></p></div><p>Now we have a fair idea of what went on. On day 1 after vaccination, 0.024% of those vaccinated tested positive. That proportion seems to have risen until about day 8, when 0.06% of those vaccinated tested positive. It then fell until day 25, when just 0.005% tested positive.</p><p>Now, to properly calculate vaccine efficacy we would need some control group who have not been vaccinated. In the original trials that was a randomly selected half who were given a placebo injection. We compared how many cases they developed, as compared to those who were vaccinated.</p><p>There is no placebo group here. No set of matching people who were not vaccinated. So to have any way of calculating an efficacy value we essentially have to invent one and imagine what the incidence would have been in it.</p><p>Doing this for the first ~10 days, seems pretty easy. We really don&rsquo;t expect to see the vaccine have any effect here, so the control group might look something like this:</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span class=nv>control_group</span> <span class=o>=</span> <span class=nf>tibble</span><span class=o>(</span>Day<span class=o>=</span><span class=m>1</span><span class=o>:</span><span class=m>10</span>,DailyIncidence<span class=o>=</span><span class=nf><a href=https://rdrr.io/r/base/seq.html>seq</a></span><span class=o>(</span><span class=m>0.00032</span>,<span class=m>0.00059</span>,length.out<span class=o>=</span><span class=m>10</span><span class=o>)</span>,type<span class=o>=</span><span class=s>"Synthetic control"</span><span class=o>)</span>
<span class=nf>ggplot</span><span class=o>(</span><span class=nf>bind_rows</span><span class=o>(</span><span class=nv>control_group</span>, <span class=nv>perday</span><span class=o>)</span>,<span class=nf>aes</span><span class=o>(</span>x<span class=o>=</span><span class=nv>Day</span>,y<span class=o>=</span><span class=nv>DailyIncidence</span>,color<span class=o>=</span><span class=nv>type</span><span class=o>)</span><span class=o>)</span><span class=o>+</span><span class=nf>geom_line</span><span class=o>(</span><span class=o>)</span><span class=o>+</span><span class=nf>theme_bw</span><span class=o>(</span><span class=o>)</span><span class=o>+</span><span class=nf>labs</span><span class=o>(</span>color<span class=o>=</span><span class=s>""</span>,x<span class=o>=</span><span class=s>"Day"</span>,y<span class=o>=</span><span class=s>"Daily Incidence"</span><span class=o>)</span><span class=o>+</span><span class=nf>scale_y_continuous</span><span class=o>(</span>labels<span class=o>=</span><span class=nf>scales</span><span class=nf>::</span><span class=nv><a href=https://scales.r-lib.org//reference/label_percent.html>percent</a></span>,limits<span class=o>=</span><span class=nf><a href=https://rdrr.io/r/base/c.html>c</a></span><span class=o>(</span><span class=m>0</span>,<span class=kc>NA</span><span class=o>)</span><span class=o>)</span> <span class=o>+</span><span class=nf>scale_color_manual</span><span class=o>(</span>values<span class=o>=</span><span class=nf><a href=https://rdrr.io/r/base/c.html>c</a></span><span class=o>(</span><span class=s>"red"</span>,<span class=s>"blue"</span><span class=o>)</span><span class=o>)</span>

</code></pre><p><img src=figs/unnamed-chunk-4-1.png width=700px style=display:block;margin:auto></p></div><p>The reason for this not being a horizontal line would have to be some genuine rise in cases over this period. One possibility is the general increasing number of cases in Israel, which continued up to around 15 Jan.Â </p><p>Unforunately, having this synthetic control line for the first 7 days isn&rsquo;t especially useful. By construction this shows ~0% efficacy in that period, because that&rsquo;s what we designed it to. What I&rsquo;m really interested is that the efficacy around Day 24. So how should we extend the line?</p><p>I&rsquo;ve illustrated 3 possible scenarios below, one where cases continue to rise in the placebo group, another where they stay flat, and another where they fall :</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r> <span class=nv>syn_control</span> <span class=o>&lt;-</span> <span class=kr>function</span><span class=o>(</span><span class=nv>final</span>, <span class=nv>name</span>,<span class=nv>offset</span><span class=o>)</span><span class=o>&#123;</span>
<span class=kr><a href=https://rdrr.io/r/base/function.html>return</a></span><span class=o>(</span><span class=nf>bind_rows</span><span class=o>(</span><span class=nf>tibble</span><span class=o>(</span>Day<span class=o>=</span><span class=m>1</span><span class=o>:</span><span class=m>10</span>,DailyIncidence<span class=o>=</span><span class=nf><a href=https://rdrr.io/r/base/seq.html>seq</a></span><span class=o>(</span><span class=m>0.00032</span><span class=o>+</span><span class=nv>offset</span>,<span class=m>0.00059</span><span class=o>+</span><span class=nv>offset</span>,length.out<span class=o>=</span><span class=m>10</span><span class=o>)</span>,type<span class=o>=</span><span class=nv>name</span><span class=o>)</span>,
                  <span class=nf>tibble</span><span class=o>(</span>Day<span class=o>=</span><span class=m>10</span><span class=o>:</span><span class=m>25</span>,DailyIncidence<span class=o>=</span><span class=nf><a href=https://rdrr.io/r/base/seq.html>seq</a></span><span class=o>(</span><span class=m>0.00059</span><span class=o>+</span><span class=nv>offset</span>,<span class=nv>final</span>,length.out<span class=o>=</span><span class=m>16</span><span class=o>)</span>,type<span class=o>=</span><span class=nv>name</span><span class=o>)</span><span class=o>)</span> <span class=o>)</span>
<span class=o>&#125;</span>
<span class=nv>combo</span> <span class=o>=</span><span class=nf>bind_rows</span><span class=o>(</span><span class=nf>syn_control</span><span class=o>(</span><span class=m>0.0010</span>,<span class=s>"Synthetic control: Growth"</span>,<span class=m>0.00001</span><span class=o>)</span>,<span class=nf>syn_control</span><span class=o>(</span><span class=m>0.00059</span>,<span class=s>"Synthetic control: flat"</span>,<span class=m>0</span><span class=o>)</span>,<span class=nf>syn_control</span><span class=o>(</span><span class=m>0.00029</span>,<span class=s>"Synthetic control: decreasing"</span>,<span class=o>-</span><span class=m>0.00001</span><span class=o>)</span>, <span class=nv>perday</span><span class=o>)</span>
<span class=nf>ggplot</span><span class=o>(</span><span class=nv>combo</span>,<span class=nf>aes</span><span class=o>(</span>x<span class=o>=</span><span class=nv>Day</span>,y<span class=o>=</span><span class=nv>DailyIncidence</span>,color<span class=o>=</span><span class=nv>type</span><span class=o>)</span><span class=o>)</span><span class=o>+</span><span class=nf>geom_line</span><span class=o>(</span><span class=o>)</span><span class=o>+</span><span class=nf>theme_bw</span><span class=o>(</span><span class=o>)</span><span class=o>+</span><span class=nf>labs</span><span class=o>(</span>color<span class=o>=</span><span class=s>""</span>,x<span class=o>=</span><span class=s>"Day"</span>,y<span class=o>=</span><span class=s>"Daily Incidence"</span><span class=o>)</span><span class=o>+</span><span class=nf>scale_y_continuous</span><span class=o>(</span>labels<span class=o>=</span><span class=nf>scales</span><span class=nf>::</span><span class=nv><a href=https://scales.r-lib.org//reference/label_percent.html>percent</a></span>,limits<span class=o>=</span><span class=nf><a href=https://rdrr.io/r/base/c.html>c</a></span><span class=o>(</span><span class=m>0</span>,<span class=kc>NA</span><span class=o>)</span><span class=o>)</span> <span class=o>+</span><span class=nf>scale_color_manual</span><span class=o>(</span>values<span class=o>=</span><span class=nf><a href=https://rdrr.io/r/base/c.html>c</a></span><span class=o>(</span><span class=s>"pink"</span>,<span class=s>"red"</span>,<span class=s>"darkred"</span>,<span class=s>"blue"</span><span class=o>)</span><span class=o>)</span>

</code></pre><p><img src=figs/unnamed-chunk-5-1.png width=700px style=display:block;margin:auto></p></div><p>These choices have a substantial effect on the efficacy we measure for days 23-25, which range from 82% (placebo cases fall) to 94% (placebo cases rise).</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span class=nv>combo</span> <span class=o>%&gt;%</span> <span class=nf><a href=https://rdrr.io/r/stats/filter.html>filter</a></span><span class=o>(</span><span class=nv>Day</span><span class=o>&gt;</span><span class=m>22</span><span class=o>)</span> <span class=o>%&gt;%</span> <span class=nf>group_by</span><span class=o>(</span><span class=nv>type</span><span class=o>)</span> <span class=o>%&gt;%</span> <span class=nf>summarise</span><span class=o>(</span>Incidence <span class=o>=</span> <span class=nf><a href=https://rdrr.io/r/base/mean.html>mean</a></span><span class=o>(</span><span class=nv>DailyIncidence</span><span class=o>)</span><span class=o>)</span> <span class=o>%&gt;%</span> <span class=nf>mutate</span><span class=o>(</span>efficacy_percent <span class=o>=</span> <span class=m>100</span><span class=o>*</span><span class=o>(</span><span class=m>1</span><span class=o>-</span> <span class=nf><a href=https://rdrr.io/r/base/Extremes.html>min</a></span><span class=o>(</span><span class=nv>Incidence</span><span class=o>)</span><span class=o>/</span><span class=nv>Incidence</span><span class=o>)</span><span class=o>)</span> <span class=o>%&gt;%</span> <span class=nf><a href=https://rdrr.io/r/stats/filter.html>filter</a></span><span class=o>(</span><span class=nv>type</span><span class=o>!=</span><span class=s>"Vaccinated"</span><span class=o>)</span> <span class=o>%&gt;%</span> <span class=nf>select</span><span class=o>(</span><span class=o>-</span><span class=nv>Incidence</span><span class=o>)</span>

<span class=c>#&gt; `summarise()` ungrouping output (override with `.groups` argument)</span>

<span class=c>#&gt; <span style=color:#555># A tibble: 3 x 2</span></span>
<span class=c>#&gt;   type                          efficacy_percent</span>
<span class=c>#&gt;   <span style=color:#555;font-style:italic>&lt;chr&gt;</span><span>                                    </span><span style=color:#555;font-style:italic>&lt;dbl&gt;</span></span>
<span class=c>#&gt; <span style=color:#555>1</span><span> Synthetic control: decreasing             82.4</span></span>
<span class=c>#&gt; <span style=color:#555>2</span><span> Synthetic control: flat                   90.8</span></span>
<span class=c>#&gt; <span style=color:#555>3</span><span> Synthetic control: Growth                 94.4</span></span>
</code></pre></div><p>So what did Maccabi do? Well something quite different to any of these. They used the period from days 0 to 12 as the control for days 13 to 24. That looks like this:</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span class=nv>control_group</span> <span class=o>=</span> <span class=nv>perday</span> <span class=o>%&gt;%</span> <span class=nf>mutate</span><span class=o>(</span>Day<span class=o>=</span><span class=nv>Day</span><span class=o>+</span><span class=m>12</span>, type<span class=o>=</span> <span class=s>"Synthetic control"</span><span class=o>)</span> <span class=o>%&gt;%</span> <span class=nf><a href=https://rdrr.io/r/stats/filter.html>filter</a></span><span class=o>(</span><span class=nv>Day</span><span class=o>&lt;</span><span class=m>25</span><span class=o>)</span>
<span class=nv>maccabi_analysis</span> <span class=o>=</span> <span class=nf>bind_rows</span><span class=o>(</span><span class=nv>control_group</span>, <span class=nv>perday</span> <span class=o>%&gt;%</span> <span class=nf><a href=https://rdrr.io/r/stats/filter.html>filter</a></span><span class=o>(</span><span class=nv>Day</span><span class=o>&lt;</span><span class=m>25</span><span class=o>)</span><span class=o>)</span>
<span class=nf>ggplot</span><span class=o>(</span><span class=nv>maccabi_analysis</span>,<span class=nf>aes</span><span class=o>(</span>x<span class=o>=</span><span class=nv>Day</span>,y<span class=o>=</span><span class=nv>DailyIncidence</span>,color<span class=o>=</span><span class=nv>type</span><span class=o>)</span><span class=o>)</span><span class=o>+</span><span class=nf>geom_line</span><span class=o>(</span><span class=o>)</span><span class=o>+</span><span class=nf>theme_bw</span><span class=o>(</span><span class=o>)</span><span class=o>+</span><span class=nf>labs</span><span class=o>(</span>color<span class=o>=</span><span class=s>""</span>,x<span class=o>=</span><span class=s>"Day"</span>,y<span class=o>=</span><span class=s>"Daily Incidence"</span><span class=o>)</span><span class=o>+</span><span class=nf>scale_y_continuous</span><span class=o>(</span>labels<span class=o>=</span><span class=nf>scales</span><span class=nf>::</span><span class=nv><a href=https://scales.r-lib.org//reference/label_percent.html>percent</a></span>,limits<span class=o>=</span><span class=nf><a href=https://rdrr.io/r/base/c.html>c</a></span><span class=o>(</span><span class=m>0</span>,<span class=kc>NA</span><span class=o>)</span><span class=o>)</span> <span class=o>+</span><span class=nf>scale_color_manual</span><span class=o>(</span>values<span class=o>=</span><span class=nf><a href=https://rdrr.io/r/base/c.html>c</a></span><span class=o>(</span><span class=s>"red"</span>,<span class=s>"blue"</span><span class=o>)</span><span class=o>)</span>

</code></pre><p><img src=figs/unnamed-chunk-7-1.png width=700px style=display:block;margin:auto></p></div><p>If again you look at day 23-24 efficacy here, you get an efficacy of 88%.</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span class=nv>maccabi_analysis</span> <span class=o>%&gt;%</span> <span class=nf><a href=https://rdrr.io/r/stats/filter.html>filter</a></span><span class=o>(</span><span class=nv>Day</span><span class=o>&gt;</span><span class=m>22</span><span class=o>)</span> <span class=o>%&gt;%</span> <span class=nf>group_by</span><span class=o>(</span><span class=nv>type</span><span class=o>)</span> <span class=o>%&gt;%</span> <span class=nf>summarise</span><span class=o>(</span>Incidence <span class=o>=</span> <span class=nf><a href=https://rdrr.io/r/base/mean.html>mean</a></span><span class=o>(</span><span class=nv>DailyIncidence</span><span class=o>)</span><span class=o>)</span> <span class=o>%&gt;%</span> <span class=nf>mutate</span><span class=o>(</span>efficacy_percent <span class=o>=</span> <span class=m>100</span><span class=o>*</span><span class=o>(</span><span class=m>1</span><span class=o>-</span> <span class=nf><a href=https://rdrr.io/r/base/Extremes.html>min</a></span><span class=o>(</span><span class=nv>Incidence</span><span class=o>)</span><span class=o>/</span><span class=nv>Incidence</span><span class=o>)</span><span class=o>)</span> <span class=o>%&gt;%</span> <span class=nf><a href=https://rdrr.io/r/stats/filter.html>filter</a></span><span class=o>(</span><span class=nv>type</span><span class=o>!=</span><span class=s>"Vaccinated"</span><span class=o>)</span> <span class=o>%&gt;%</span> <span class=nf>select</span><span class=o>(</span><span class=o>-</span><span class=nv>Incidence</span><span class=o>)</span>

<span class=c>#&gt; `summarise()` ungrouping output (override with `.groups` argument)</span>

<span class=c>#&gt; <span style=color:#555># A tibble: 1 x 2</span></span>
<span class=c>#&gt;   type              efficacy_percent</span>
<span class=c>#&gt;   <span style=color:#555;font-style:italic>&lt;chr&gt;</span><span>                        </span><span style=color:#555;font-style:italic>&lt;dbl&gt;</span></span>
<span class=c>#&gt; <span style=color:#555>1</span><span> Synthetic control             87.5</span></span>
</code></pre></div><p>Maccabi however looked across the entire period. If you do that you get an efficacy close to 50% (they got 51%, I got 56%, possibly due to slight differences in the weighting of different days based on the number of people in them).</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span class=nv>maccabi_analysis</span> <span class=o>%&gt;%</span> <span class=nf><a href=https://rdrr.io/r/stats/filter.html>filter</a></span><span class=o>(</span><span class=nv>Day</span><span class=o>&gt;</span><span class=m>12</span><span class=o>)</span> <span class=o>%&gt;%</span> <span class=nf>group_by</span><span class=o>(</span><span class=nv>type</span><span class=o>)</span> <span class=o>%&gt;%</span> <span class=nf>summarise</span><span class=o>(</span>Incidence <span class=o>=</span> <span class=nf><a href=https://rdrr.io/r/base/mean.html>mean</a></span><span class=o>(</span><span class=nv>DailyIncidence</span><span class=o>)</span><span class=o>)</span> <span class=o>%&gt;%</span> <span class=nf>mutate</span><span class=o>(</span>efficacy_percent <span class=o>=</span> <span class=m>100</span><span class=o>*</span><span class=o>(</span><span class=m>1</span><span class=o>-</span> <span class=nf><a href=https://rdrr.io/r/base/Extremes.html>min</a></span><span class=o>(</span><span class=nv>Incidence</span><span class=o>)</span><span class=o>/</span><span class=nv>Incidence</span><span class=o>)</span><span class=o>)</span> <span class=o>%&gt;%</span> <span class=nf><a href=https://rdrr.io/r/stats/filter.html>filter</a></span><span class=o>(</span><span class=nv>type</span><span class=o>!=</span><span class=s>"Vaccinated"</span><span class=o>)</span> <span class=o>%&gt;%</span> <span class=nf>select</span><span class=o>(</span><span class=o>-</span><span class=nv>Incidence</span><span class=o>)</span>

<span class=c>#&gt; `summarise()` ungrouping output (override with `.groups` argument)</span>

<span class=c>#&gt; <span style=color:#555># A tibble: 1 x 2</span></span>
<span class=c>#&gt;   type              efficacy_percent</span>
<span class=c>#&gt;   <span style=color:#555;font-style:italic>&lt;chr&gt;</span><span>                        </span><span style=color:#555;font-style:italic>&lt;dbl&gt;</span></span>
<span class=c>#&gt; <span style=color:#555>1</span><span> Synthetic control             56.1</span></span>
</code></pre></div><p>So, what to conclude? Essentially the way Maccabi analysed this data was one relatively arbitrary possibility among many. Efficacy estimates are quite sensitive to the guesses one makes about how many cases there would have been in the control group. Maccabi&rsquo;s decision here is quite conservative in that it includes as a control group the day 10 to 12 period where some cases may well have been averted by vaccination.</p><p>The decision to look at the entire day 12-24 period rather than the end of it, will yield a result lower than the true efficacy towards the end of this period, given the clear evidence for an increase in efficacy over the period. This is incredibly valuable data, and all in all, things look pretty good.</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span class=nf>ggplot</span><span class=o>(</span><span class=nv>perday</span>,<span class=nf>aes</span><span class=o>(</span>x<span class=o>=</span><span class=nv>Day</span>,y<span class=o>=</span><span class=nv>DailyIncidence</span><span class=o>)</span><span class=o>)</span><span class=o>+</span><span class=nf>geom_line</span><span class=o>(</span>color<span class=o>=</span><span class=s>"black"</span><span class=o>)</span><span class=o>+</span><span class=nf>theme_bw</span><span class=o>(</span><span class=o>)</span><span class=o>+</span><span class=nf>labs</span><span class=o>(</span>x<span class=o>=</span><span class=s>"Day"</span>,y<span class=o>=</span><span class=s>"Daily Incidence"</span><span class=o>)</span><span class=o>+</span><span class=nf>scale_y_continuous</span><span class=o>(</span>labels<span class=o>=</span><span class=nf>scales</span><span class=nf>::</span><span class=nv><a href=https://scales.r-lib.org//reference/label_percent.html>percent</a></span>,limits<span class=o>=</span><span class=nf><a href=https://rdrr.io/r/base/c.html>c</a></span><span class=o>(</span><span class=m>0</span>,<span class=kc>NA</span><span class=o>)</span><span class=o>)</span> <span class=o>+</span><span class=nf>geom_smooth</span><span class=o>(</span><span class=o>)</span>

<span class=c>#&gt; `geom_smooth()` using method = 'loess' and formula 'y ~ x'</span>

</code></pre><p><img src=figs/unnamed-chunk-10-1.png width=700px style=display:block;margin:auto></p></div></div><div class=share-box aria-hidden=true><ul class=share><li><a href="https://twitter.com/intent/tweet?url=/post/2021-01-31-maccabi-2/&text=Analysing%20Maccabi%20data%20on%20initial%20efficacy%20of%20first%20vaccine%20dose%20-%20part%202" target=_blank rel=noopener class=share-btn-twitter><i class="fab fa-twitter"></i></a></li><li><a href="https://www.facebook.com/sharer.php?u=/post/2021-01-31-maccabi-2/&t=Analysing%20Maccabi%20data%20on%20initial%20efficacy%20of%20first%20vaccine%20dose%20-%20part%202" target=_blank rel=noopener class=share-btn-facebook><i class="fab fa-facebook"></i></a></li><li><a href="mailto:?subject=Analysing%20Maccabi%20data%20on%20initial%20efficacy%20of%20first%20vaccine%20dose%20-%20part%202&body=/post/2021-01-31-maccabi-2/" target=_blank rel=noopener class=share-btn-email><i class="fas fa-envelope"></i></a></li><li><a href="https://www.linkedin.com/shareArticle?url=/post/2021-01-31-maccabi-2/&title=Analysing%20Maccabi%20data%20on%20initial%20efficacy%20of%20first%20vaccine%20dose%20-%20part%202" target=_blank rel=noopener class=share-btn-linkedin><i class="fab fa-linkedin-in"></i></a></li><li><a href="whatsapp://send?text=Analysing%20Maccabi%20data%20on%20initial%20efficacy%20of%20first%20vaccine%20dose%20-%20part%202%20/post/2021-01-31-maccabi-2/" target=_blank rel=noopener class=share-btn-whatsapp><i class="fab fa-whatsapp"></i></a></li><li><a href="https://service.weibo.com/share/share.php?url=/post/2021-01-31-maccabi-2/&title=Analysing%20Maccabi%20data%20on%20initial%20efficacy%20of%20first%20vaccine%20dose%20-%20part%202" target=_blank rel=noopener class=share-btn-weibo><i class="fab fa-weibo"></i></a></li></ul></div><div class="media author-card content-widget-hr"><img class="avatar mr-3 avatar-circle" src=/authors/admin/avatar_hu8af67025a90ae4f28f8d45441763eced_96138_270x270_fill_q75_lanczos_center.jpg alt="Theo Sanderson"><div class=media-body><h5 class=card-title>Theo Sanderson</h5><h6 class=card-subtitle>Sir Henry Wellcome Fellow</h6><p class=card-text>Biologist developing tools to scale malaria reverse genetics.</p><ul class=network-icon aria-hidden=true><li><a href=/#contact><i class="fas fa-envelope"></i></a></li><li><a href=https://twitter.com/theosanderson target=_blank rel=noopener><i class="fab fa-twitter"></i></a></li><li><a href="https://scholar.google.com/citations?user=voDDwYIAAAAJ" target=_blank rel=noopener><i class="fas fa-graduation-cap"></i></a></li><li><a href=https://github.com/theosanderson target=_blank rel=noopener><i class="fab fa-github"></i></a></li></ul></div></div></div></article></div><div class=page-footer><div class=container><footer class=site-footer></footer></div></div><div id=modal class="modal fade" role=dialog><div class=modal-dialog><div class=modal-content><div class=modal-header><h5 class=modal-title>Cite</h5><button type=button class=close data-dismiss=modal aria-label=Close>
<span aria-hidden=true>&#215;</span></button></div><div class=modal-body><pre><code class="tex hljs"></code></pre></div><div class=modal-footer><a class="btn btn-outline-primary my-1 js-copy-cite" href=# target=_blank><i class="fas fa-copy"></i>Copy</a>
<a class="btn btn-outline-primary my-1 js-download-cite" href=# target=_blank><i class="fas fa-download"></i>Download</a><div id=modal-error></div></div></div></div></div><script src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.4/imagesloaded.pkgd.min.js integrity="sha256-lqvxZrPLtfffUl2G/e7szqSvPBILGbwmsGE1MKlOi0Q=" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.6/isotope.pkgd.min.js integrity="sha256-CBrpuqrMhXwcLLUd5tvQ4euBHCdh7wGlDfNz8vbu/iI=" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/instant.page/5.1.0/instantpage.min.js integrity="sha512-1+qUtKoh9XZW7j+6LhRMAyOrgSQKenQ4mluTR+cvxXjP1Z54RxZuzstR/H9kgPXQsVB8IW7DMDFUJpzLjvhGSQ==" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/highlight.min.js integrity="sha512-TDKKr+IvoqZnPzc3l35hdjpHD0m+b2EC2SrLEgKDRWpxf2rFCxemkgvJ5kfU48ip+Y+m2XVKyOCD85ybtlZDmw==" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/languages/r.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/leaflet.min.js integrity="sha512-SeiQaaDh73yrb56sTW/RgVdi/mMqNeM2oBwubFHagc5BkixSpP1fvqF47mKzPGWYSSy4RwbBunrJBQ4Co8fRWA==" crossorigin=anonymous></script><script id=search-hit-fuse-template type=text/x-template>
      <div class="search-hit" id="summary-{{key}}">
        <div class="search-hit-content">
          <div class="search-hit-name">
            <a href="{{relpermalink}}">{{title}}</a>
            <div class="article-metadata search-hit-type">{{type}}</div>
            <p class="search-hit-description">{{snippet}}</p>
          </div>
        </div>
      </div>
    </script><script src=https://cdnjs.cloudflare.com/ajax/libs/fuse.js/3.2.1/fuse.min.js integrity="sha256-VzgmKYmhsGNNN4Ph1kMW+BjoYJM2jV5i4IlFoeZA9XI=" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin=anonymous></script><script src=/en/js/wowchemy.min.297f736e130400781cfee00eff1f1afd.js></script></body></html>